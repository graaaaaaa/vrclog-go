name: Documentation Check

on:
  push:
    branches: [main]
    paths:
      - '**.md'
      - 'pkg/**/*.go'
      - 'examples/**/*.go'
      - '.markdown-link-check.json'
  pull_request:
    branches: [main]
    paths:
      - '**.md'
      - 'pkg/**/*.go'
      - 'examples/**/*.go'
      - '.markdown-link-check.json'

jobs:
  docs:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    steps:
      - uses: actions/checkout@v6

      - name: Set up Go
        uses: actions/setup-go@v6
        with:
          go-version: '1.25'
          cache: true

      - name: Verify examples compile
        run: go build ./examples/...

      - name: Run example tests
        run: go test -v ./pkg/vrclog/ -run Example

      - name: Check Markdown links
        uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: 'yes'
          config-file: '.markdown-link-check.json'
